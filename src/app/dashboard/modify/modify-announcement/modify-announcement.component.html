<div class="container">
	<div class="row">
		<div class="col">
			<rd-card [cardTitle]="'Insert Announcement'">
				<form #announcementForm="ngForm">
					<div class="row">
						<div class="col-5">
							<div class="row form-group">
								<label class="col-4 col-form-label">Member Type</label>
								<div class="col">
									<ng-select
										name="selectMemberType"
										[items]="roles$ | async"
										bindLabel="roleName"
										[searchable]="false"
										[clearable]="false"
										[ngModel]="(roles$ | async)[0]"
									></ng-select>
								</div>
							</div>
							<div class="row form-group">
								<label for="title" class="col-4 col-form-label">Title</label>
								<div class="col">
									<input type="text" name="title" class="form-control" ngModel />
								</div>
							</div>
							<div class="row form-group">
								<label for="attachment" class="col-4 col-form-label"> Attachment </label>
								<div class="col">
									<input
										type="file"
										name="file"
										class="form-control"
										ngModel
										(change)="uploadFile($event.target.files)"
									/>
								</div>
							</div>
						</div>
						<div class="col">
							<div class="row form-group">
								<div class="col">
									<label for="contentTextArea">Content</label>
									<textarea
										name="contentTextArea"
										class="form-control w-100"
										style="height: 100px"
										placeholder="Content here..."
										ngModel
									></textarea>
								</div>
							</div>
						</div>
					</div>
					<div class="row justify-content-around">
						<button
							class="btn btn-primary"
							[disabled]="!announcementForm.valid"
							(click)="submitAnnouncementForm(announcementForm)"
						>
							<fa-icon [icon]="['fas', 'plus']"></fa-icon> Insert New Announcement
						</button>
					</div>
				</form>
			</rd-card>
		</div>
	</div>
	<div class="row">
		<div class="col">
			<rd-card [cardTitle]="'Announcement List'" [isLoading]="announcementsLoading$ | async">
				<table class="table table-sm table-hover table-striped table-bordered text-center">
					<thead>
						<tr>
							<th>Date</th>
							<th>Charge</th>
							<th>Member Permission</th>
							<th>Title</th>
							<th>Content and Attachment</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let announcement of announcements$ | async" class="cursor-pointer">
							<td>
								{{ announcement.InsertOn | date: 'dd MMM yyyy HH:mm:ss' }}
							</td>
							<td>{{ announcement.InsertBy.Name }}</td>
							<td>{{ announcement.MemberType }}</td>
							<td>{{ announcement.Title }}</td>
							<td
								class="text-left"
								style="font-size: small"
								[innerHTML]="announcement.contentAndAttachment"
							></td>
						</tr>
					</tbody>
				</table>
			</rd-card>
		</div>
	</div>
</div>
